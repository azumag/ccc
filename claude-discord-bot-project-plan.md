# Claude Code Discord Bot ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨ˆç”»æ›¸

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå

**Personal Claude Code Discord Controller**

### ç›®çš„

å€‹äººã®Discordã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã®Claude Codeã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã€é–‹ç™ºä½œæ¥­ã‚’åŠ¹ç‡åŒ–ã™ã‚‹

### å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼

**å€‹äººåˆ©ç”¨**ï¼ˆé–‹ç™ºè€…æœ¬äººã®ã¿ï¼‰

---

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚´ãƒ¼ãƒ«

### ä¸»è¦ç›®æ¨™

1. DiscordçµŒç”±ã§ãƒ­ãƒ¼ã‚«ãƒ«Claude Codeã‚’æ“ä½œ
2. ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
3. å€‹äººé–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å¤§å¹…æ”¹å–„

### æˆåŠŸæŒ‡æ¨™

- [ ] Discord ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ â†’ Claude Codeå®Ÿè¡Œã®æˆåŠŸç‡ 95%ä»¥ä¸Š
- [ ] ã‚¹ãƒ¬ãƒƒãƒ‰å˜ä½ã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ 30ç§’ä»¥å†…
- [ ] å€‹äººä½œæ¥­ã§ã®æ—¥å¸¸çš„ãªæ´»ç”¨

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### åŸºæœ¬ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
æŒ‡å®šDiscord Channel
     â†“ (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿)
Discord Bot (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§èµ·å‹•)
     â†“ (tmuxçµŒç”±)
Claude Code (åŒä¸€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå®Ÿè¡Œ + --dangerously-skip-permissions)
     â†“ (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ)
Discord Channel (ãƒ¬ã‚¹ãƒãƒ³ã‚¹æŠ•ç¨¿)
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ç®¡ç†

- **èµ·å‹•å ´æ‰€**: Gitãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆï¼ˆã¾ãŸã¯ä»»æ„ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
- **ä½œæ¥­ç¯„å›²**: èµ·å‹•ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
- **å®‰å…¨æ€§**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šãƒ»å±¥æ­´ç®¡ç†

### ä½¿ç”¨æ–¹æ³•

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /path/to/your-project

# Botèµ·å‹•ï¼ˆãƒãƒ£ãƒãƒ«åã‚’æŒ‡å®šï¼‰
deno run --allow-all bot.ts --channel "dev-claude"
# ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ã§æŒ‡å®š
DISCORD_CHANNEL_NAME="dev-claude" deno task start

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±è‡ªå‹•æ¤œå‡º
# - package.json, requirements.txt, Cargo.tomlç­‰
# - .git ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±
# - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

#### ä½œæ¥­ç¯„å›²ã®åˆ¶é™

- **å®‰å…¨ãªç¯„å›²**: `./` é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **ç¦æ­¢ç¯„å›²**: `../` ã§ã®è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹ç¦æ­¢
- **ã‚·ã‚¹ãƒ†ãƒ ä¿è­·**: `/etc/`, `/usr/` ç­‰ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹ä¸å¯

### æ ¸å¿ƒã‚¢ã‚¤ãƒ‡ã‚¢ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ£ãƒãƒ«ç›£è¦–

#### ãƒãƒ£ãƒãƒ«ç›£è¦–è¨­è¨ˆ

1. **Botèµ·å‹•æ™‚ã«ãƒãƒ£ãƒãƒ«åæŒ‡å®š** â†’ è©²å½“ãƒãƒ£ãƒãƒ«ã‚’ç›£è¦–
2. **ãƒãƒ£ãƒãƒ«æŠ•ç¨¿** â†’ ãã®ã¾ã¾ Claude Code ã«é€ä¿¡
3. **Claudeå¿œç­”** â†’ åŒã˜ãƒãƒ£ãƒãƒ«ã«è¿”ä¿¡
4. **å˜ä¸€tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³** â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§1ã¤ã®Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³

#### ãƒ¡ãƒªãƒƒãƒˆ

- ğŸ¯ **ã‚·ãƒ³ãƒ—ãƒ«**: è¤‡é›‘ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒä¸è¦
- âš¡ **é«˜é€Ÿ**: ã‚¹ãƒ¬ãƒƒãƒ‰ä½œæˆãªã©ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãªã—
- ğŸ”§ **ç›´æ„Ÿçš„**: ãƒãƒ£ãƒãƒ«æŠ•ç¨¿ = ClaudeæŒ‡ç¤ºã®æ˜ç¢ºãªé–¢ä¿‚
- ğŸ  **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰**: èµ·å‹•ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç¶­æŒ
- ğŸ›¡ï¸ **å®‰å…¨**: --dangerously-skip-permissions ã§æ¨©é™ãƒã‚§ãƒƒã‚¯ç„¡åŠ¹åŒ–

---

## ğŸ› ï¸ æŠ€è¡“ä»•æ§˜

### ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª

**Deno (TypeScript)** - é¸æŠç†ç”±ï¼š

- ãƒ¢ãƒ€ãƒ³ã§å®‰å…¨ãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ 
- NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ
- æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å……å®Ÿ
- ä¾å­˜é–¢ä¿‚ç®¡ç†ã®ç°¡ç´ åŒ–
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§TypeScriptå¯¾å¿œ

### ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆCLIå‘¼ã³å‡ºã—ç‰ˆï¼‰

```typescript
// deno.json
{
  "imports": {
    "discord.js": "npm:discord.js@^14.x",
    "dotenv": "https://deno.land/std@0.208.0/dotenv/mod.ts"
  },
  "tasks": {
    "start": "deno run --allow-net --allow-read --allow-write --allow-env --allow-run bot.ts",
    "dev": "deno run --allow-net --allow-read --allow-write --allow-env --allow-run --watch bot.ts"
  },
  "permissions": {
    "net": true,
    "read": true,
    "write": true,
    "env": true,
    "run": true  // Claude Code CLIå®Ÿè¡Œã®ãŸã‚å¿…é ˆ
  }
}
```

**æ³¨æ„**: Claude Code SDKã¯ä¸è¦ã€‚CLIç‰ˆã®ã¿ä½¿ç”¨ã™ã‚‹ãŸã‚ä¾å­˜é–¢ä¿‚ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚

````
### Claude Codeçµ±åˆæ–¹å¼ï¼ˆtmuxçµŒç”±ï¼‰
```typescript
// bot.ts
import { Client, GatewayIntentBits } from "npm:discord.js@^14";
import { load } from "https://deno.land/std@0.208.0/dotenv/mod.ts";

// tmuxçµŒç”±ã§Claude Codeå®Ÿè¡Œï¼ˆå˜ä¸€æ°¸ç¶šã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
async function executeClaudeCodeInTmux(prompt: string, projectRoot: string) {
  const sessionName = "claude-main";
  
  // tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  const hasSession = await checkTmuxSession(sessionName);
  
  if (!hasSession) {
    // æ–°è¦tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆã—ã¦claudeã‚’èµ·å‹•
    await createTmuxSessionWithClaude(sessionName, projectRoot);
  }
  
  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã«é€ä¿¡
  const command = new Deno.Command("tmux", {
    args: [
      "send-keys", "-t", sessionName,
      prompt, "Enter"
    ],
    cwd: projectRoot,
    stdout: "piped",
    stderr: "piped",
  });

  const { code, stdout, stderr } = await command.output();
  
  if (code !== 0) {
    const errorText = new TextDecoder().decode(stderr);
    throw new Error(`tmux command failed: ${errorText}`);
  }
  
  // Claudeã®å¿œç­”ã‚’å–å¾—ï¼ˆtmuxã®å‡ºåŠ›ãƒãƒƒãƒ•ã‚¡ã‹ã‚‰ï¼‰
  return await getTmuxOutput(sessionName);
}

async function checkTmuxSession(sessionName: string): Promise<boolean> {
  const command = new Deno.Command("tmux", {
    args: ["has-session", "-t", sessionName],
    stdout: "piped",
    stderr: "piped",
  });
  const { code } = await command.output();
  return code === 0;
}

async function createTmuxSessionWithClaude(sessionName: string, projectRoot: string): Promise<void> {
  // tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
  const createSession = new Deno.Command("tmux", {
    args: ["new-session", "-d", "-s", sessionName, "-c", projectRoot],
    stdout: "piped",
    stderr: "piped",
  });
  await createSession.output();
  
  // claudeã‚³ãƒãƒ³ãƒ‰ã‚’--dangerously-skip-permissionsã§èµ·å‹•
  const startClaude = new Deno.Command("tmux", {
    args: ["send-keys", "-t", sessionName, "claude --dangerously-skip-permissions", "Enter"],
    stdout: "piped",
    stderr: "piped",
  });
  await startClaude.output();
  
  // èµ·å‹•ã‚’å°‘ã—å¾…ã¤
  await new Promise(resolve => setTimeout(resolve, 2000));
}

async function getTmuxOutput(sessionName: string): Promise<string> {
  // tmuxãƒšã‚¤ãƒ³ã®å‡ºåŠ›å†…å®¹ã‚’å–å¾—
  const command = new Deno.Command("tmux", {
    args: ["capture-pane", "-t", sessionName, "-p"],
    stdout: "piped",
    stderr: "piped",
  });
  
  const { code, stdout } = await command.output();
  
  if (code !== 0) {
    throw new Error("Failed to capture tmux output");
  }
  
  const output = new TextDecoder().decode(stdout);
  return parseClaude Output(output);
}

function parseClaudeOutput(rawOutput: string): string {
  // tmuxã®å‡ºåŠ›ã‹ã‚‰Claudeã®å¿œç­”éƒ¨åˆ†ã‚’æŠ½å‡º
  const lines = rawOutput.split('\n');
  // Claudeã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆâ¯ï¼‰ä»¥é™ã®å†…å®¹ã‚’æŠ½å‡º
  let capturing = false;
  const claudeResponse: string[] = [];
  
  for (const line of lines) {
    if (line.includes('â¯') && !capturing) {
      capturing = true;
      continue;
    }
    if (capturing && line.includes('â¯')) {
      break; // æ¬¡ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§çµ‚äº†
    }
    if (capturing) {
      claudeResponse.push(line);
    }
  }
  
  return claudeResponse.join('\n').trim();
}

// ã‚·ãƒ³ãƒ—ãƒ«ãªtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
class SimpleTmuxManager {
  private sessionName = "claude-main";
  private lastActivity = new Date();
  
  updateActivity() {
    this.lastActivity = new Date();
  }
  
  async clearSession(): Promise<boolean> {
    // ãƒ¡ã‚¤ãƒ³ã®Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†
    const command = new Deno.Command("tmux", {
      args: ["kill-session", "-t", this.sessionName],
      stdout: "piped",
      stderr: "piped",
    });
    
    try {
      await command.output();
      return true;
    } catch {
      return false;
    }
  }
  
  async restartSession(projectRoot: string): Promise<boolean> {
    // æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¦ã‹ã‚‰å†ä½œæˆ
    await this.clearSession();
    await new Promise(resolve => setTimeout(resolve, 1000));
    
    try {
      await createTmuxSessionWithClaude(this.sessionName, projectRoot);
      return true;
    } catch {
      return false;
    }
  }
  
  async getSessionStatus(): Promise<{ exists: boolean; uptime: string }> {
    const exists = await checkTmuxSession(this.sessionName);
    const uptime = exists 
      ? Math.floor((Date.now() - this.lastActivity.getTime()) / 1000 / 60) + "åˆ†å‰"
      : "åœæ­¢ä¸­";
    
    return { exists, uptime };
  }
}
````

### å˜ä¸€tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®ç¶™ç¶šåˆ©ç”¨

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹æ™‚ã«1ã¤ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
tmux new-session -d -s "claude-main" -c "/project/path"
tmux send-keys -t "claude-main" "claude --dangerously-skip-permissions" Enter

# DiscordæŠ•ç¨¿1: Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ã¦
tmux send-keys -t "claude-main" "Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ã¦" Enter

# DiscordæŠ•ç¨¿2: ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«propsã‚’è¿½åŠ ã—ã¦
tmux send-keys -t "claude-main" "ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«propsã‚’è¿½åŠ ã—ã¦" Enter

# DiscordæŠ•ç¨¿3: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚’ä½œã£ã¦
tmux send-keys -t "claude-main" "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã‚’ä½œã£ã¦" Enter

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèª
tmux has-session -t "claude-main"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
tmux kill-session -t "claude-main"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹ã‚’ç›´æ¥ç¢ºèªï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
tmux attach -t "claude-main"
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆDenoç‰ˆï¼‰

```yaml
# .claude/project.ymlï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
name: "My Awesome Project"
language: "typescript"
framework: "deno"
excluded_dirs:
  - .git
  - dist
  - build
coding_standards: "./docs/coding-standards.md"
```

---

## ğŸ“‹ æ©Ÿèƒ½ä»•æ§˜

### åŸºæœ¬ãƒ•ãƒ­ãƒ¼

#### 1. ãƒãƒ£ãƒãƒ«æŠ•ç¨¿ã«ã‚ˆã‚‹æŒ‡ç¤º

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: (æŒ‡å®šãƒãƒ£ãƒãƒ«ã«æŠ•ç¨¿) ã“ã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¦
â†“
Bot: ãƒãƒ£ãƒãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œå‡º
â†“
Claude Code: tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³çµŒç”±ã§å®Ÿè¡Œ
â†“
Bot: åŒã˜ãƒãƒ£ãƒãƒ«ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹æŠ•ç¨¿
```

#### 2. ç¶™ç¶šä¼šè©±

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: (åŒã˜ãƒãƒ£ãƒãƒ«ã«æŠ•ç¨¿) TypeScriptã‚‚å¯¾å¿œã—ã¦ãã ã•ã„
â†“
Bot: ãƒãƒ£ãƒãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œå‡º
â†“
Claude Code: åŒã˜tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ç¶™ç¶šå®Ÿè¡Œ
â†“
Bot: åŒã˜ãƒãƒ£ãƒãƒ«ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹æŠ•ç¨¿
```

### è©³ç´°æ©Ÿèƒ½

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

- **å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«1ã¤ã®tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³
- **è‡ªå‹•èµ·å‹•**: Botã®åˆå›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡æ™‚ã«Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
- **æ‰‹å‹•ãƒªã‚»ãƒƒãƒˆ**: `/restart` ã‚³ãƒãƒ³ãƒ‰ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³å†èµ·å‹•
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª**: `/status` ã‚³ãƒãƒ³ãƒ‰ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹è¡¨ç¤º

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¡¨ç¤º

- **ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯**: è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé©ç”¨
- **é•·æ–‡å¯¾å¿œ**: 2000æ–‡å­—åˆ¶é™ã‚’è€ƒæ…®ã—ãŸåˆ†å‰²æŠ•ç¨¿
- **é€²æ—è¡¨ç¤º**: é•·æ™‚é–“å‡¦ç†æ™‚ã®çŠ¶æ³è¡¨ç¤º
- **ã‚¨ãƒ©ãƒ¼è¡¨ç¤º**: åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### ãƒãƒ£ãƒãƒ«ç›£è¦–

- **æŒ‡å®šãƒãƒ£ãƒãƒ«å°‚ç”¨**: èµ·å‹•æ™‚ã«æŒ‡å®šã—ãŸãƒãƒ£ãƒãƒ«ã®ã¿ç›£è¦–
- **å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†**: ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ä¸è¦ã€æŠ•ç¨¿å†…å®¹ã‚’ãã®ã¾ã¾æŒ‡ç¤ºã¨ã—ã¦å‡¦ç†
- **æ¨©é™ã‚¹ã‚­ãƒƒãƒ—**: --dangerously-skip-permissions ã§å®‰å…¨åˆ¶ç´„ã‚’ç„¡åŠ¹åŒ–

#### ç‰¹æ®Šã‚³ãƒãƒ³ãƒ‰

````typescript
// /restart ã‚³ãƒãƒ³ãƒ‰ã§tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³å†èµ·å‹•
if (message.content.startsWith("/restart")) {
  const restarted = await this.tmuxManager.restartSession(this.projectContext.rootPath);
  await message.reply(
    restarted ? "âœ… Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ã¾ã—ãŸ" : "âŒ å†èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ",
  );
  return;
}

// /status ã‚³ãƒãƒ³ãƒ‰ã§ç¾åœ¨ã®çŠ¶æ…‹è¡¨ç¤º
if (message.content.startsWith("/status")) {
  const status = await this.tmuxManager.getSessionStatus();
  await message.reply(
    `ğŸ“Š **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ${this.projectContext.projectName}\nğŸ“ **ãƒ‘ã‚¹**: ${this.projectContext.rootPath}\nğŸ”„ **Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³**: ${
      status.exists ? "èµ·å‹•ä¸­" : "åœæ­¢ä¸­"
    }\nâ° **æœ€çµ‚æ´»å‹•**: ${status.uptime}`,
  );
  return;
}

// /attach ã‚³ãƒãƒ³ãƒ‰ã§tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³æ¥ç¶šæ–¹æ³•è¡¨ç¤º
if (message.content.startsWith("/attach")) {
  await message.reply(
    "ğŸ”§ **tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ç›´æ¥æ¥ç¶š**:\n```bash\ntmux attach -t claude-main\n```\n**æ³¨æ„**: æ¥ç¶šä¸­ã¯Botã‹ã‚‰ã®æ“ä½œãŒã§ãã¾ã›ã‚“",
  );
  return;
}
````

---

## ğŸ¨ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹

### ä½¿ç”¨ä¾‹

#### ã‚±ãƒ¼ã‚¹1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼

```
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ Botèµ·å‹•ï¼ˆãƒãƒ£ãƒãƒ«æŒ‡å®šï¼‰
cd ~/projects/my-web-app
deno run --allow-all bot.ts --channel "dev-claude"

Discord (#dev-claude):
src/components/UserForm.tsx ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦

â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šã‚’è€ƒæ…®ã—ãŸè©³ç´°ãƒ¬ãƒ“ãƒ¥ãƒ¼
â†’ åŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ä»–ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
â†’ åŒãƒãƒ£ãƒãƒ«ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœæŠ•ç¨¿
```

#### ã‚±ãƒ¼ã‚¹2: æ©Ÿèƒ½è¿½åŠ 

```
Discord (#dev-claude):
ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„

â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’ç†è§£ã—ãŸé©åˆ‡ãªãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ææ¡ˆ
â†’ æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€çŠ¶æ…‹ç®¡ç†ã¨ã®çµ±åˆã‚’è€ƒæ…®
â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆã‚ã›ãŸãƒ†ã‚¹ãƒˆä½œæˆ
â†’ åŒãƒãƒ£ãƒãƒ«ã«å®Ÿè£…çµæœæŠ•ç¨¿
```

#### ã‚±ãƒ¼ã‚¹3: ãƒã‚°ä¿®æ­£ï¼ˆç¶™ç¶šã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

```
Discord (#dev-claude):
User: api/users.ts ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã¾ã™
Bot: [ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ç¢ºèª â†’ å•é¡Œç®‡æ‰€ç‰¹å®š â†’ ä¿®æ­£ææ¡ˆ]
User: ãƒ†ã‚¹ãƒˆã‚‚æ›´æ–°ã—ã¦
Bot: [é–¢é€£ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª â†’ ãƒ†ã‚¹ãƒˆæ›´æ–°]
User: ä»–ã®å½±éŸ¿ç¯„å›²ã‚‚èª¿ã¹ã¦
Bot: [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ â†’ å½±éŸ¿åˆ†æ]
```

---

## ğŸ”§ å®Ÿè£…è©³ç´°

### Discord Botè¨­å®šï¼ˆCLIç‰ˆï¼‰

````typescript
// types.ts
interface ProjectContext {
  rootPath: string;
  projectName: string;
  language: string;
  framework?: string;
  gitRepo?: string;
}

interface ThreadSession {
  threadId: string;
  sessionId: string;
  createdAt: Date;
  lastActivity: Date;
  topic: string;
}

// bot.ts
import { Client, GatewayIntentBits, Message, ThreadChannel } from "npm:discord.js@^14";
import { load } from "https://deno.land/std@0.208.0/dotenv/mod.ts";

class ClaudeDiscordBot {
  private tmuxManager = new SimpleTmuxManager();
  private projectContext: ProjectContext;
  private client: Client;
  private targetChannelId: string;
  
  constructor(channelName: string) {
    this.projectContext = this.detectProjectContext();
    this.targetChannelId = ""; // èµ·å‹•å¾Œã«ãƒãƒ£ãƒãƒ«åã‹ã‚‰è§£æ±º
    this.client = new Client({
      intents: [
        GatewayIntentBits.Guilds,
        GatewayIntentBits.GuildMessages,
        GatewayIntentBits.MessageContent,
      ],
    });
    
    this.setupEventHandlers();
    this.resolveTargetChannel(channelName);
  }
  
  private setupEventHandlers() {
    this.client.on('messageCreate', async (message) => {
      if (message.author.bot) return;
      if (message.channel.id !== this.targetChannelId) return;
      
      await this.handleChannelMessage(message);
    });
  }
  
  private async resolveTargetChannel(channelName: string) {
    this.client.on('ready', () => {
      const guild = this.client.guilds.cache.first();
      const channel = guild?.channels.cache.find(ch => ch.name === channelName);
      if (channel) {
        this.targetChannelId = channel.id;
        console.log(`ğŸ¯ ç›£è¦–å¯¾è±¡ãƒãƒ£ãƒãƒ«: #${channelName} (${channel.id})`);
      } else {
        console.error(`âŒ ãƒãƒ£ãƒãƒ« '${channelName}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
      }
    });
  }
  
  private async handleChannelMessage(message: Message) {
    const prompt = message.content.trim();
    
    // ç‰¹æ®Šã‚³ãƒãƒ³ãƒ‰ãƒã‚§ãƒƒã‚¯
    if (await this.handleSpecialCommands(message, prompt)) {
      return;
    }
    
    // é€šå¸¸ã®Claude Codeå®Ÿè¡Œ
    await this.executeAndRespond(message, prompt);
  }
  
  private async handleSpecialCommands(message: Message, prompt: string): Promise<boolean> {
    // /restart ã‚³ãƒãƒ³ãƒ‰
    if (prompt.startsWith('/restart')) {
      const restarted = await this.tmuxManager.restartSession(this.projectContext.rootPath);
      await message.reply(restarted ? 'âœ… Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ã¾ã—ãŸ' : 'âŒ å†èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ');
      return true;
    }
    
    // /status ã‚³ãƒãƒ³ãƒ‰
    if (prompt.startsWith('/status')) {
      const status = await this.tmuxManager.getSessionStatus();
      await message.reply(`ğŸ“Š **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ${this.projectContext.projectName}\nğŸ“ **ãƒ‘ã‚¹**: ${this.projectContext.rootPath}\nğŸ”„ **Claudeã‚»ãƒƒã‚·ãƒ§ãƒ³**: ${status.exists ? 'èµ·å‹•ä¸­' : 'åœæ­¢ä¸­'}\nâ° **æœ€çµ‚æ´»å‹•**: ${status.uptime}`);
      return true;
    }
    
    // /attach ã‚³ãƒãƒ³ãƒ‰
    if (prompt.startsWith('/attach')) {
      await message.reply('ğŸ”§ **tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ç›´æ¥æ¥ç¶š**:\n```bash\ntmux attach -t claude-main\n```\n**æ³¨æ„**: æ¥ç¶šä¸­ã¯Botã‹ã‚‰ã®æ“ä½œãŒã§ãã¾ã›ã‚“');
      return true;
    }
    
    return false;
  }
  
  private async executeAndRespond(message: Message, prompt: string) {
    try {
      // å‡¦ç†ä¸­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      const thinking = await message.reply("ğŸ¤” è€ƒãˆã¦ã„ã¾ã™...");
      
      // tmuxçµŒç”±ã§Claude Codeå®Ÿè¡Œ
      const result = await executeClaudeCodeInTmux(prompt, this.projectContext.rootPath);
      
      // ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€ä¿¡
      await thinking.edit("âœ… å®Œäº†");
      await this.sendFormattedResponse(message.channel, result);
      
      // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ´»å‹•æ™‚åˆ»æ›´æ–°
      this.tmuxManager.updateActivity();
      
    } catch (error) {
      await message.reply(`âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`);
    }
  }
  
  // Botèµ·å‹•ã®ãƒ¡ã‚¤ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰
  async start() {
    await this.client.login(Deno.env.get('DISCORD_BOT_TOKEN'));
    console.log(`ğŸ¤– Claude Discord Bot started in project: ${this.projectContext.projectName}`);
  }
}

// Botèµ·å‹•ç”¨ã®ãƒ¡ã‚¤ãƒ³é–¢æ•°
async function main() {
  const channelName = Deno.args[1] || Deno.env.get('DISCORD_CHANNEL_NAME') || 'claude';
  
  if (Deno.args[0] === '--channel') {
    const bot = new ClaudeDiscordBot(channelName);
    await bot.start();
  } else {
    console.error('ä½¿ç”¨æ–¹æ³•: deno run --allow-all bot.ts --channel <ãƒãƒ£ãƒãƒ«å>');
    Deno.exit(1);
  }
}

if (import.meta.main) {
  main();
}
}
````

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»è¨­å®š

### ç’°å¢ƒè¨­å®šï¼ˆtmuxç‰ˆï¼‰

```bash
# 1. å¿…è¦ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# tmux ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå„OSå›ºæœ‰ï¼‰
# macOS:
brew install tmux

# Ubuntu/Debian:
sudo apt install tmux

# 2. Claude Code CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼‰
npm install -g @anthropic-ai/claude-code

# 3. Claude Codeèªè¨¼
claude  # åˆå›å®Ÿè¡Œæ™‚ã«OAuthèªè¨¼

# 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
# .envï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«é…ç½®ï¼‰
DISCORD_BOT_TOKEN=your_bot_token
GUILD_ID=your_personal_server_id
AUTHORIZED_USER_ID=your_discord_user_id

# ANTHROPIC_API_KEYã¯ claude ã‚³ãƒãƒ³ãƒ‰ãŒè‡ªå‹•ã§åˆ©ç”¨
```

### å®Ÿè¡Œæ–¹æ³•

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /path/to/your-project

# Denoæ¨©é™ä»˜ãã§å®Ÿè¡Œ
deno run --allow-net --allow-read --allow-write --allow-env --allow-run bot.ts

# ã¾ãŸã¯ deno.json ã® tasks ã‚’ä½¿ç”¨
deno task start
deno task dev  # é–‹ç™ºæ™‚ï¼ˆ--watchä»˜ãï¼‰
```

### ã‚·ãƒ³ãƒ—ãƒ«å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
Discord Channel Message
     â†“ (æŒ‡å®šãƒãƒ£ãƒãƒ«ã®ã¿)
Deno Bot
     â†“ (tmux session check)
tmux has-session -t claude-main
     â†“ (if not exists)
tmux new-session -d -s claude-main
tmux send-keys -t claude-main "claude --dangerously-skip-permissions" Enter
     â†“ (send prompt)
tmux send-keys -t claude-main "prompt" Enter
     â†“ (capture output)
tmux capture-pane -t claude-main -p
     â†“ (parse Claude response)
Deno Bot (parseClaudeOutput)
     â†“
Discord Channel (formatted response)
```

---

## ğŸ’¡ æ‹¡å¼µã‚¢ã‚¤ãƒ‡ã‚¢

### Phase 2æ©Ÿèƒ½

1. **tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³æ‹¡å¼µ**
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰
   - ãƒãƒ«ãƒãƒšã‚¤ãƒ³å¯¾å¿œï¼ˆãƒ­ã‚°è¡¨ç¤ºç”¨ãªã©ï¼‰
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–è¨­å®š
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©æ—§æ©Ÿèƒ½ï¼ˆãƒœãƒƒãƒˆå†èµ·å‹•æ™‚ï¼‰

2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ·±åº¦ç†è§£**
   - ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ã®è‡ªå‹•ç”Ÿæˆ
   - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®èªè­˜
   - ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã®è‡ªå‹•é©ç”¨

3. **ãƒãƒ«ãƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¯¾å¿œ**
   - è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã§ã®Botåˆ‡ã‚Šæ›¿ãˆ
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰è¨­å®šã®ç®¡ç†
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨ªæ–­çš„ãªçŸ¥è­˜ã®æ´»ç”¨

### Phase 3æ©Ÿèƒ½

1. **tmuxçµ±åˆæ©Ÿèƒ½**
   - tmuxè¨­å®šã®è‡ªå‹•æœ€é©åŒ–
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£è¦–ãƒ»è‡ªå‹•å¾©æ—§
   - ãƒ­ã‚°å‡ºåŠ›ã®æ§‹é€ åŒ–
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±è¨ˆæƒ…å ±

2. **é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ**
   - ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ
   - ãƒ“ãƒ«ãƒ‰çŠ¶æ³ã®ç›£è¦–
   - CI/CDé€£æº

3. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†æ**
   - ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹
   - æŠ€è¡“çš„è² å‚µã®æ¤œå‡º
   - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ææ¡ˆ

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### é–‹ç™ºåŠ¹ç‡å‘ä¸Š

- **æ°¸ç¶šã‚»ãƒƒã‚·ãƒ§ãƒ³**: tmuxã«ã‚ˆã‚Šãƒœãƒƒãƒˆå†èµ·å‹•æ™‚ã‚‚ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç¶­æŒ
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ–‡è„ˆç†è§£**: é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»è¨­å®šã‚’è€ƒæ…®ã—ãŸææ¡ˆ
- **å®‰å…¨ãªä½œæ¥­ç’°å¢ƒ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–ã¸ã®æ„å›³ã—ãªã„å½±éŸ¿é˜²æ­¢
- **å±¥æ­´ç®¡ç†**: Discordã‚¹ãƒ¬ãƒƒãƒ‰ã§ã®ä½œæ¥­ãƒ­ã‚°è‡ªå‹•ä¿å­˜
- **ç¶™ç¶šçš„æ”¹å–„**: åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®å­¦ç¿’åŠ¹æœ

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ

- **ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹æ“ä½œ**: Discord â†” ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®ç°¡ç´ åŒ–**: `claude -p`ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒä¸è¦
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰æœ€é©åŒ–**: å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç‰¹æ€§ã«å¿œã˜ãŸæ”¯æ´
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–**: tmuxã«ã‚ˆã‚ŠClaudeã®å‹•ä½œçŠ¶æ³ã‚’ç›´æ¥ç¢ºèªå¯èƒ½

## ğŸ¯ é–‹å§‹æ‰‹é †ï¼ˆDenoç‰ˆï¼‰

### 1. åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. Deno ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã¾ã ã®å ´åˆï¼‰
curl -fsSL https://deno.land/install.sh | sh

# 2. Claude Code CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @anthropic-ai/claude-code

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ç§»å‹•
cd /path/to/your-project

# 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
# deno.json ä½œæˆ
# .env ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
# bot.ts ä½œæˆ

# 5. Discord Botä½œæˆãƒ»è¨­å®š
# Discord Developer Portalã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
```

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

```typescript
// deno.json
{
  "imports": {
    "discord.js": "npm:discord.js@^14",
    "dotenv": "https://deno.land/std@0.208.0/dotenv/mod.ts"
  },
  "tasks": {
    "start": "deno run --allow-all bot.ts"
  }
}

// .env
DISCORD_BOT_TOKEN=your_bot_token
GUILD_ID=your_server_id
AUTHORIZED_USER_ID=your_user_id

// bot.ts (åŸºæœ¬æ§‹é€ )
import { Client, GatewayIntentBits } from "npm:discord.js@^14";

const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages, 
    GatewayIntentBits.MessageContent
  ]
});

client.on('messageCreate', async (message) => {
  if (message.mentions.has(client.user)) {
    // Claude Codeå‘¼ã³å‡ºã—å‡¦ç†
  }
});

await client.login(Deno.env.get('DISCORD_BOT_TOKEN'));
```

### 3. Botèµ·å‹•ãƒ»ãƒ†ã‚¹ãƒˆ

```bash
# Botèµ·å‹•
deno task start

# åˆå›ãƒ†ã‚¹ãƒˆ
Discord: @Bot ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’æ•™ãˆã¦
â†’ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±è¡¨ç¤ºã§å‹•ä½œç¢ºèª

Discord: @Bot deno.json ã®å†…å®¹ã‚’ç¢ºèªã—ã¦
â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª
```

### 4. æœ¬æ ¼æ´»ç”¨

- æ—¥å¸¸çš„ãªé–‹ç™ºä½œæ¥­ã§ã®åˆ©ç”¨é–‹å§‹
- ã‚¹ãƒ¬ãƒƒãƒ‰å˜ä½ã§ã®ä½œæ¥­æ•´ç†
- Denoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¶™ç¶šçš„æ”¹å–„

---

## ğŸ’¡ Denoã®ãƒ¡ãƒªãƒƒãƒˆ

### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¨©é™åˆ¶é™
- å®Ÿè¡Œæ™‚æ¨©é™ã®æ˜ç¤ºçš„æŒ‡å®š
- å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹

### ğŸš€ é–‹ç™ºåŠ¹ç‡

- TypeScriptæ¨™æº–ã‚µãƒãƒ¼ãƒˆ
- NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹åˆ©ç”¨
- ä¾å­˜é–¢ä¿‚ç®¡ç†ã®ç°¡ç´ åŒ–
- æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å……å®Ÿ

### ğŸ› ï¸ é‹ç”¨é¢

- å˜ä¸€ãƒã‚¤ãƒŠãƒªã§ã®é…å¸ƒ
- Webã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰æº–æ‹ 
- é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

**tmuxçµ±åˆã«ã‚ˆã‚Šã€ã‚ˆã‚Šå®‰å®šã§æ°¸ç¶šçš„ãªClaude Code Discord BotãŒå®Ÿç¾ã§ãã¾ã™ï¼**

## ğŸ”„ tmuxã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ãƒ¡ãƒªãƒƒãƒˆ

### ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

- **ãƒ—ãƒ­ã‚»ã‚¹å†åˆ©ç”¨**: Claudeãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½¿ã„å›ã™ã“ã¨ã§èµ·å‹•æ™‚é–“çŸ­ç¸®
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“ã§ã®ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æœ€é©åŒ–**: èªè¨¼æ¸ˆã¿ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å†åˆ©ç”¨

### ğŸ›¡ï¸ å®‰å®šæ€§å‘ä¸Š

- **ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢**: å„ã‚¹ãƒ¬ãƒƒãƒ‰ãŒç‹¬ç«‹ã—ãŸtmuxã‚»ãƒƒã‚·ãƒ§ãƒ³
- **éšœå®³éš”é›¢**: ä¸€ã¤ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å•é¡ŒãŒä»–ã«å½±éŸ¿ã—ãªã„
- **è‡ªå‹•å¾©æ—§**: tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ°¸ç¶šæ€§ã«ã‚ˆã‚‹è€éšœå®³æ€§

### ğŸ”§ é‹ç”¨é¢ã®æ”¹å–„

- **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§**: `tmux attach`ã§ç›´æ¥ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèªå¯èƒ½
- **æ‰‹å‹•ä»‹å…¥**: å¿…è¦ã«å¿œã˜ã¦ç›´æ¥tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ“ä½œ
- **ãƒ­ã‚°ç®¡ç†**: tmuxã®å±¥æ­´æ©Ÿèƒ½ã«ã‚ˆã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²
